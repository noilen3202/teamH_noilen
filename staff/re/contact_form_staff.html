<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>お問い合わせ（職員向け） - 地域支援 Hub</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <style>
        body { /* 修正: '.body' から 'body' に変更 */
            font-family: 'Inter', sans-serif;
            background-color: #f7f9fb;
        }
        .header-main {
            background-color: #1e3a8a; /* Dark Blue for Staff */
            color: white;
            padding: 1rem 1.5rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }
        .content-card {
            background-color: white;
            border-radius: 1rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }
        .form-label {
            font-weight: 600;
            color: #374151; /* Gray-700 */
        }
    </style>
</head>
<body class="flex flex-col min-h-screen">

    <header class="header-main">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <h1 class="text-2xl font-bold flex items-center">
                <i class="fas fa-headset mr-3"></i>職員向け お問い合わせ
            </h1>
        </div>
    </header>

    <main class="flex-grow container mx-auto px-4 sm:px-6 lg:px-8 py-10">
        <div class="max-w-4xl mx-auto content-card p-8 md:p-12">
            <h2 class="text-3xl font-extrabold text-gray-900 mb-8 text-center">
                <i class="fas fa-envelope-open-text mr-2 text-blue-700"></i>システム・運営に関するお問い合わせフォーム
            </h2>

            <form id="contactFormStaff">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                    <div>
                        <label for="name" class="block text-sm form-label mb-1">氏名 (自動入力想定)</label>
                        <input type="text" id="name" name="name" value="山田 太郎" readonly class="mt-1 block w-full px-4 py-2 bg-gray-100 border border-gray-300 rounded-lg shadow-inner text-gray-600 sm:text-base">
                    </div>
                    <div>
                        <label for="email" class="block text-sm form-label mb-1">メールアドレス (自動入力想定)</label>
                        <input type="email" id="email" name="email" value="yamada.taro@staff.local" readonly class="mt-1 block w-full px-4 py-2 bg-gray-100 border border-gray-300 rounded-lg shadow-inner text-gray-600 sm:text-base">
                    </div>
                    <div>
                        <label for="department" class="block text-sm form-label mb-1">所属部署 (自動入力想定)</label>
                        <input type="text" id="department" name="department" value="福祉部 地域支援課" readonly class="mt-1 block w-full px-4 py-2 bg-gray-100 border border-gray-300 rounded-lg shadow-inner text-gray-600 sm:text-base">
                    </div>
                    <div>
                        <label for="extension" class="block text-sm form-label mb-1">内線番号 (自動入力想定)</label>
                        <input type="text" id="extension" name="extension" value="5021" readonly class="mt-1 block w-full px-4 py-2 bg-gray-100 border border-gray-300 rounded-lg shadow-inner text-gray-600 sm:text-base">
                    </div>
                </div>

                <div class="mb-6">
                    <label for="category" class="block text-sm form-label mb-1">お問い合わせ種別 <span class="text-red-500">*</span></label>
                    <select id="category" name="category" required class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-base">
                        <option value="">選択してください</option>
                        <option value="system_bug">システム障害・バグ報告</option>
                        <option value="function_request">機能改善・追加要望</option>
                        <option value="data_issue">データ修正・連携に関する問題</option>
                        <option value="operation_guidance">操作方法に関する質問</option>
                        <option value="other">その他</option>
                    </select>
                </div>

                <div class="mb-6">
                    <label for="subject" class="block text-sm form-label mb-1">件名 <span class="text-red-500">*</span></label>
                    <input type="text" id="subject" name="subject" required maxlength="100" placeholder="例: ログイン画面でエラーが発生します" class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm placeholder-gray-400 focus:ring-blue-500 focus:border-blue-500 sm:text-base">
                </div>

                <div class="mb-8">
                    <label for="message" class="block text-sm form-label mb-1">お問い合わせ詳細 <span class="text-red-500">*</span></label>
                    <textarea id="message" name="message" rows="8" required placeholder="具体的な状況（操作手順、エラーメッセージ、期待する動作など）をご記入ください。" class="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm placeholder-gray-400 focus:ring-blue-500 focus:border-blue-500 sm:text-base"></textarea>
                </div>

                <div>
                    <button type="submit" class="w-full bg-blue-700 text-white py-3 rounded-lg font-semibold text-xl hover:bg-blue-800 transition duration-300 shadow-lg shadow-blue-400/50">
                        <i class="fas fa-paper-plane mr-2"></i>送信する
                    </button>
                </div>
            </form>
        </div>
    </main>

    <script>
        // 職員データのモック（通常はセッションやバックエンドから取得）
        const staffData = {
            name: "山田 太郎",
            email: "yamada.taro@staff.local",
            department: "福祉部 地域支援課",
            extension: "5021"
        };

        document.addEventListener('DOMContentLoaded', function() {
            // 職員データをフォームに反映（readonlyフィールド）
            document.getElementById('name').value = staffData.name;
            document.getElementById('email').value = staffData.email;
            document.getElementById('department').value = staffData.department;
            document.getElementById('extension').value = staffData.extension;
        });

        document.getElementById('contactFormStaff').addEventListener('submit', function(event) {
            event.preventDefault();

            // フォームデータを取得
            const contactData = {
                category: document.getElementById('category').value,
                name: document.getElementById('name').value,
                email: document.getElementById('email').value,
                department: document.getElementById('department').value,
                extension: document.getElementById('extension').value,
                subject: document.getElementById('subject').value,
                message: document.getElementById('message').value,
                timestamp: new Date().toISOString()
            };

            // 実際はサーバー（Flask）で登録処理を行います。
            // POSTリクエストを送信する処理を実装する必要があります。

            // 送信完了メッセージを表示（モック）
            alert(`職員専用のお問い合わせを受け付けました。担当部署に確認メールを送信します。（モック）`);
            
            // フォームをリセットし、メニュー画面へ遷移
            this.reset();
            // 修正: Flaskルートにリダイレクト
            window.location.href = './staff_menu.html'; 
        });
    </script>
</body>
</html>